$(document).on("ajax:success", ".favorite-btn", function(event) {
  var data = event.detail[0]; // JSONレスポンスを取得
  var bookId = data.book_id;
  var favoritesCount = data.favorites_count;

  // いいねボタンとカウントを更新
  $("#book_" + bookId).find(".favorites-count").html(favoritesCount);
  $("#book_" + bookId).find(".favorite-btn").replaceWith("<%= j(render 'favorites/favorite-btn', book: @book) %>");
});

$("#book_<%= @book.id %>").find(".favorite-btn").replaceWith("<%= j(render partial: 'favorites/favorite-btn', locals: { book: @book }) %>");
$("#book_<%= @book.id %>").find(".favorites-count").html("<%= @book.favorites.count %>");
